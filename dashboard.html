<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DeltaBuddy Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="layout">
    <aside>
      <a href="index.html">
        <img src="assets/deltabuddy-logo.png" alt="DeltaBuddy Logo">
      </a>
      <nav>
        <ul>
          <li><a href="portfolio.html" style="color: white; text-decoration: none;">Portfolio</a></li>
          <li><a href="dashboard.html" style="color: white; text-decoration: none;">Dashboard</a></li>
          <li><a href="greeks.html" style="color: white; text-decoration: none;">Greeks & Alerts</a></li>
          <li><a href="strategy.html" style="color: white; text-decoration: none;">Strategy Assistant</a></li>
          <li><a href="adjustment.html" style="color: white; text-decoration: none;">Adjustment Bot</a></li>
          <li><a href="riskcoach.html" style="color: white; text-decoration: none;">Risk Coach</a></li>
          <li><a href="marketpulse.html" style="color: white; text-decoration: none;">Market Pulse</a></li>
          <li><a href="markettools.html" style="color: white; text-decoration: none;">Market Tools</a></li>
          <li><a href="fii-dii.html" style="color: white; text-decoration: none;">FII & DII</a></li>
          <li><a href="fo.html" style="color: white; text-decoration: none;">Future & Options</a></li>
          <li><a href="events.html" style="color: white; text-decoration: none;">Events</a></li>
          <li><a href="screener.html" style="color: white; text-decoration: none;">Screener</a></li>
          <li><a href="telegram.html" style="color: white; text-decoration: none;">Telegram Integration</a></li>
        </ul>
      </nav>
    </aside>
    <main>
      <h1>AI + SaaS Platform</h1>
      <div class="grid">
<!-- Portfolio Summary -->
<div class="card">
  <h3>Portfolio Summary</h3>
  <p><strong>Net P&L:</strong> â‚¹15,430</p>
  <p><strong>Todayâ€™s MTM:</strong> +â‚¹2,150</p>
  <p><strong>Margin Used:</strong> â‚¹87,000</p>
  <p><strong>Open Positions:</strong> 4</p>
  <p><strong>Hedged %:</strong> 75%</p>
</div>

<!-- Strategy Assistant -->
<div class="card">
  <h3>Strategy Assistant</h3>
  <div class="tabs">
    <div class="tab active">AI Suggestions</div>
    <div class="tab">Pre-built Strategies</div>
  </div>

  <!-- AI Suggestions -->
  <div class="smart-filters" style="margin-top: 1rem;">
    <p><strong>User:</strong> Generate a low-volatility options strategy.</p>
    <p><strong>DeltaGPT:</strong> Suggested strategy â†’ <strong>Iron Condor</strong>:</p>
    <ul>
      <li>Sell NIFTY 17800 CE</li>
      <li>Buy NIFTY 18000 CE</li>
      <li>Sell NIFTY 17200 PE</li>
      <li>Buy NIFTY 17000 PE</li>
    </ul>
  </div>

  <!-- Pre-built Strategies -->
  <div class="prebuilt-filters" style="margin-top: 1rem; display: none;">
    <p>Available Pre-built Strategies:</p>
    <ul>
      <li>ğŸ“ˆ Bull Call Spread â€” Risk defined bullish strategy</li>
      <li>ğŸ“‰ Bear Put Spread â€” Risk defined bearish strategy</li>
      <li>âš–ï¸ Iron Condor â€” Neutral market strategy</li>
      <li>ğŸ“Š Ratio Spread â€” Directional volatility play</li>
    </ul>
  </div>
</div>

<!-- Real-time Greeks & Alerts -->
<div class="card">
  <h3>Real-time Option Greeks & Alerts</h3>
  <p><strong>IV:</strong> 19.7% &nbsp; <strong>Alert:</strong> 212</p>
  <div id="greeks-alerts-content"></div>
</div>

<!-- Market Pulse -->
<div class="card">
  <h3>Market Pulse</h3>
  <p>Live sentiment and key market indicators:</p>
  <div id="market-pulse-content"></div>
</div>

<!-- Screener -->
<div class="card">
  <h3>Screener</h3>
  <p>Filter and find optimal options strategies:</p>
  <div id="screener-content"></div>
</div>
<!-- Market Tools -->
<div class="card">
  <h3>Market Tools</h3>
  <p>Key option market analytics:</p>
  <ul>
    <li>ğŸ“Š Highest OI: NIFTY 18000 CE (5.2M)</li>
    <li>ğŸ“Š Highest Put OI: NIFTY 17000 PE (4.9M)</li>
    <li>âš¡ IV Skew: 2.1 (Bullish bias)</li>
    <li>ğŸ” Max Pain: NIFTY 17500</li>
    <li>ğŸ’¥ Unusual IV Surge: RELIANCE +22%</li>
  </ul>
</div>

<!-- Risk Coach -->
<div class="card">
  <h3>Risk Coach</h3>
  <p>Personalized trading risk insights:</p>
  <ul>
    <li>âš ï¸ You tend to overtrade during low VIX periods â†’ recommended reduction in leverage.</li>
    <li>âœ… Current delta exposure is balanced â†’ no immediate hedge needed.</li>
    <li>ğŸ›¡ï¸ Consider adding protection as VIX > 19 today.</li>
    <li>ğŸš« Avoid excessive short gamma positions in the current volatility environment.</li>
  </ul>
</div>

<!-- Live Alerts -->
<div class="card">
  <h3>Live Alerts</h3>
  <p>Latest Option Trading Signals:</p>
  <ul>
    <li>ğŸš€ <strong>RELIANCE</strong> IV Surge +22% @ 10:42 AM</li>
    <li>ğŸ“ˆ <strong>NIFTY 17800 CE</strong> OI Spike +35% @ 10:40 AM</li>
    <li>âš ï¸ <strong>INFY</strong> Unusual Put Volume detected @ 10:37 AM</li>
    <li>ğŸ”¥ <strong>BANKNIFTY 47000 PE</strong> IV Crush -18% @ 10:35 AM</li>
  </ul>
</div>

<!-- FII & DII Flows -->
<div class="card">
  <h3>FII & DII Flows</h3>
  <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">
    <thead>
      <tr style="background: #f3f4f6;">
        <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">Date</th>
        <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">FII (â‚¹ Cr)</th>
        <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">DII (â‚¹ Cr)</th>
        <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">Net (â‚¹ Cr)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">2025-06-05</td>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">+1543</td>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">-843</td>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">+700</td>
      </tr>
      <tr>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">2025-06-04</td>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">-134</td>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">+421</td>
        <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">+287</td>
      </tr>
    </tbody>
  </table>
</div>
</div> <!-- End of .grid -->
<!-- Footer -->
<footer style="background: #1e293b; color: white; text-align: center; padding: 1rem; margin-top: 2rem;">
  Â© 2025 DeltaBuddy. All rights reserved. |
  <a href="mailto:contact@deltabuddy.com" style="color: #60a5fa; text-decoration: none;">contact@deltabuddy.com</a> |
  <a href="https://t.me/DeltaBuddyBot" style="color: #60a5fa; text-decoration: none;">Telegram</a>
</footer>
<!-- Tab Switching Script -->
<script>
  document.querySelectorAll('.card .tabs').forEach(tabContainer => {
    const tabs = tabContainer.querySelectorAll('.tab');
    const parentCard = tabContainer.closest('.card');

    tabs.forEach((tab, index) => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        const contentBlocks = parentCard.querySelectorAll('.custom-filters, .smart-filters, .prebuilt-filters');
        contentBlocks.forEach(block => {
          block.style.display = 'none';
        });

        const targetClass = ['smart-filters', 'prebuilt-filters', 'custom-filters'][index];
        const targetBlock = parentCard.querySelector(`.${targetClass}`);
        if (targetBlock) {
          targetBlock.style.display = 'block';
        }
      });
    });
  });
</script>

<!-- Screener Button Script -->
<script>
  document.querySelectorAll('.custom-filters button').forEach(button => {
    button.addEventListener('click', () => {
      const parent = button.closest('.custom-filters');
      const selectedSymbols = Array.from(parent.querySelector('select').selectedOptions).map(option => option.value);
      const oiChange = parent.querySelector('input[placeholder*="OI Change"]').value;
      const ivRange = parent.querySelector('input[placeholder*="IV Range"]').value;
      const pcrRange = parent.querySelector('input[placeholder*="PCR Range"]').value;
      const deltaThreshold = parent.querySelector('input[placeholder*="Delta Threshold"]').value;

      const screenerData = {
        symbols: selectedSymbols,
        oiChange: oiChange,
        ivRange: ivRange,
        pcrRange: pcrRange,
        deltaThreshold: deltaThreshold
      };

      console.log('ğŸŸ¢ Screener Request:', screenerData);

      // POST to API (placeholder)
      fetch('/api/screener', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(screenerData)
      })
      .then(response => response.json())
      .then(results => {
        console.log('ğŸŸ¢ Screener Response:', results);

        // Populate Results Table
        const tableBody = document.getElementById('screener-results');
        tableBody.innerHTML = ''; // clear previous results

        results.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">${row.symbol}</td>
            <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">${row.oiChange}</td>
            <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">${row.iv}</td>
            <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">${row.pcr}</td>
            <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">${row.delta}</td>
          `;
          tableBody.appendChild(tr);
        });
      })
      .catch(error => console.error('âŒ Screener Error:', error));
    });
  });
</script>

<!-- Dashboard dynamic cards script -->
<script src="dashboard.js"></script>
</body>
</html>
