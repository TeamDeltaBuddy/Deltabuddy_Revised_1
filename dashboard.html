<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DeltaBuddy Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f3f4f6;
    }
    .layout {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    aside {
      width: 250px;
      background: #0f172a;
      color: white;
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
    }
    aside img {
      width: 120px;
      margin: 0 auto 2rem;
    }
    aside nav ul {
      list-style: none;
      padding: 0;
    }
    aside nav ul li {
      padding: 0.8rem 0.5rem;
      cursor: pointer;
    }
    aside nav ul li:hover {
      background: #1e293b;
      border-radius: 5px;
    }

    main {
      flex-grow: 1;
      padding: 2rem;
      overflow-y: auto;
      background: #f9fafb;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 1.5rem;
    }

    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 1rem 1.5rem;
    }

    .card h3 {
      margin-top: 0;
    }

    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
      border-bottom: 2px solid #e5e7eb;
    }

    .tab {
      background: #f3f4f6;
      padding: 0.6rem 1rem;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s ease;
      border: 1px solid transparent;
      border-bottom: none;
    }

    .tab:hover {
      background: #e5e7eb;
    }

    .tab.active {
      background: #ffffff;
      color: #3b82f6;
      border-color: #e5e7eb #e5e7eb white #e5e7eb;
      border-bottom: 2px solid white;
    }
  </style>
</head>
<body>
  <div class="layout">
    <aside>
  <a href="index.html">
    <img src="assets/deltabuddy-logo.png" alt="DeltaBuddy Logo">
  </a>
  <nav>
    <ul>
      <li><strong>Portfolio</strong></li>
      <li>Dashboard</li>
      <li>Greeks & Alerts</li>
      <li>Strategy Assistant</li> <!-- now single tab -->
      <li>Adjustment Bot</li>
      <li>Risk Coach</li>
      <li>Market Pulse</li>
      <li>Market Tools</li>
      <li>FII & DII</li>
      <li>Future & Options</li>
      <li>
        <a href="events.html" style="color: inherit; text-decoration: none;">Events</a>
      </li>
      <li>Screener</li>
      <li style="margin-left: 1rem;">‚îî Smart Filters</li>
      <li style="margin-left: 1rem;">‚îî Pre-built Filters</li>
      <li style="margin-left: 1rem;">‚îî Custom Filters</li>
      <li>Telegram Integration</li>
    </ul>
  </nav>
</aside>

    <main>
      <h1>AI + SaaS Platform</h1>
      <div class="grid">

        <!-- Portfolio Summary -->
        <div class="card">
          <h3>Portfolio Summary</h3>
          <p><strong>Net P&L:</strong> ‚Çπ15,430</p>
          <p><strong>Today‚Äôs MTM:</strong> +‚Çπ2,150</p>
          <p><strong>Margin Used:</strong> ‚Çπ87,000</p>
          <p><strong>Open Positions:</strong> 4</p>
          <p><strong>Hedged %:</strong> 75%</p>
        </div>
<!-- Strategy Assistant -->
<div class="card">
  <h3>Strategy Assistant</h3>
  <div class="tabs">
    <div class="tab active">AI Suggestions</div>
    <div class="tab">Pre-built Strategies</div>
  </div>

  <!-- AI Suggestions -->
  <div class="smart-filters" style="margin-top: 1rem;">
    <p><strong>User:</strong> Generate a low-volatility options strategy.</p>
    <p><strong>DeltaGPT:</strong> Suggested strategy ‚Üí <strong>Iron Condor</strong>:</p>
    <ul>
      <li>Sell NIFTY 17800 CE</li>
      <li>Buy NIFTY 18000 CE</li>
      <li>Sell NIFTY 17200 PE</li>
      <li>Buy NIFTY 17000 PE</li>
    </ul>
  </div>

  <!-- Pre-built Strategies -->
  <div class="prebuilt-filters" style="margin-top: 1rem; display: none;">
    <p>Available Pre-built Strategies:</p>
    <ul>
      <li>üìà Bull Call Spread ‚Äî Risk defined bullish strategy</li>
      <li>üìâ Bear Put Spread ‚Äî Risk defined bearish strategy</li>
      <li>‚öñÔ∏è Iron Condor ‚Äî Neutral market strategy</li>
      <li>üìä Ratio Spread ‚Äî Directional volatility play</li>
    </ul>
  </div>
</div>
        
        <!-- Real-time Greeks & Alerts -->
        <div class="card">
          <h3>Real-time Option Greeks & Alerts</h3>
          <div class="metrics">
            <div><strong>Delta:</strong> 0.354</div>
            <div><strong>Theta:</strong> -0.123</div>
            <div><strong>Gamma:</strong> 0.008</div>
            <div><strong>Vega:</strong> 0.218</div>
          </div>
          <p><strong>IV:</strong> 19.7% &nbsp; <strong>Alert:</strong> 212</p>
        </div>

        <!-- Screener -->
        <div class="card">
          <h3>Screener</h3>
          <div class="tabs">
            <div class="tab active">Smart Filters</div>
            <div class="tab">Pre-built Filters</div>
            <div class="tab">Custom Filters</div>
          </div>

          <!-- Smart Filters -->
          <div class="smart-filters" style="margin-top: 1rem;">
            <p>AI-identified setups based on Greeks, IV, and volatility signals.</p>
            <ul>
              <li>üìà High Conviction Long ‚Äì IV < 18%, OI ‚Üë, PCR: 1.2</li>
              <li>‚ö†Ô∏è Short Gamma Warning ‚Äì Gamma > 0.5, Vega < 0.1</li>
            </ul>
          </div>

          <!-- Pre-built Filters -->
          <div class="prebuilt-filters" style="margin-top: 1rem; display: none;">
            <p>Explore filters like:</p>
            <ul>
              <li>üî• OI Spike > 25% ‚Äî BANKNIFTY 48700 CE</li>
              <li>üíß IV Crush ‚Äì INFY, TCS</li>
              <li>üîç Unusual Volume ‚Äì HDFCBANK > 3x avg</li>
            </ul>
          </div>

          <!-- Custom Filters -->
          <div class="custom-filters" style="margin-top: 1rem; display: none;">
            <label>
              <strong>Select Symbols:</strong><br>
              <select multiple style="width: 100%; padding: 0.5rem; border-radius: 5px;">
                <option>NIFTY</option>
                <option>BANKNIFTY</option>
                <option>RELIANCE</option>
                <option>INFY</option>
                <option>TCS</option>
                <option>ICICIBANK</option>
              </select>
            </label><br><br>

            <label>
              <strong>OI Change (%):</strong><br>
              <input type="number" placeholder="e.g. > 25" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <label>
              <strong>IV Range (%):</strong><br>
              <input type="text" placeholder="e.g. 12‚Äì25" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <label>
              <strong>PCR Range:</strong><br>
              <input type="text" placeholder="e.g. 0.8‚Äì1.2" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <label>
              <strong>Delta Threshold:</strong><br>
              <input type="text" placeholder="e.g. > 0.3" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <button style="background: #3b82f6; color: white; padding: 0.7rem 1.2rem; border: none; border-radius: 5px; cursor: pointer;">
              Run Screener
            </button>

            <!-- Results Table -->
            <hr style="margin: 1.5rem 0;">
            <h4>Results</h4>
            <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">
              <thead>
                <tr style="background: #f3f4f6;">
                  <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">Symbol</th>
                  <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">OI Change %</th>
                  <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">IV %</th>
                  <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">PCR</th>
                  <th style="padding: 0.5rem; border: 1px solid #e5e7eb;">Delta</th>
                </tr>
              </thead>
              <tbody id="screener-results">
                <tr>
                  <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">BANKNIFTY 48700 CE</td>
                  <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">+27%</td>
                  <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">16.3%</td>
                  <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">1.05</td>
                  <td style="padding: 0.5rem; border: 1px solid #e5e7eb;">0.42</td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </main>
  </div>

  <!-- Tab Switching Script -->
  <script>
    document.querySelectorAll('.card .tabs').forEach(tabContainer => {
      const tabs = tabContainer.querySelectorAll('.tab');
      const parentCard = tabContainer.closest('.card');

      tabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          const contentBlocks = parentCard.querySelectorAll('.custom-filters, .smart-filters, .prebuilt-filters');
          contentBlocks.forEach(block => {
            block.style.display = 'none';
          });

          const targetClass = ['smart-filters', 'prebuilt-filters', 'custom-filters'][index];
          const targetBlock = parentCard.querySelector(`.${targetClass}`);
          if (targetBlock) {
            targetBlock.style.display = 'block';
          }
        });
      });
    });

    // Run Screener button logic
    document.querySelectorAll('.custom-filters button').forEach(button => {
      button.addEventListener('click', () => {
        const parent = button.closest('.custom-filters');
        const selectedSymbols = Array.from(parent.querySelector('select').selectedOptions).map(option => option.value);
        const oiChange = parent.querySelector('input[placeholder*="OI Change"]').value;
        const ivRan
