<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DeltaBuddy Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f3f4f6;
    }
    .layout {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    aside {
      width: 250px;
      background: #0f172a;
      color: white;
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
    }
    aside img {
      width: 120px;
      margin: 0 auto 2rem;
    }
    aside nav ul {
      list-style: none;
      padding: 0;
    }
    aside nav ul li {
      padding: 0.8rem 0.5rem;
      cursor: pointer;
    }
    aside nav ul li:hover {
      background: #1e293b;
      border-radius: 5px;
    }

    main {
      flex-grow: 1;
      padding: 2rem;
      overflow-y: auto;
      background: #f9fafb;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 1.5rem;
    }

    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 1rem 1.5rem;
    }

    .card h3 {
      margin-top: 0;
    }

    .metrics {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
    }

    .tabs {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .tab {
      background: #e5e7eb;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
    }

    .tab.active {
      background: #3b82f6;
      color: white;
    }
  </style>
</head>
<body>
  <div class="layout">
    <aside>
      <img src="assets/deltabuddy-logo.png" alt="DeltaBuddy Logo">
      <nav>
        <ul>
          <li><strong>Portfolio</strong></li>
          <li>Dashboard</li>
          <li>Greeks & Alerts</li>
          <li>Strategy Assistant</li>
          <li>Pre-built Strategies</li>
          <li>Adjustment Bot</li>
          <li>Risk Coach</li>
          <li>Market Pulse</li>
          <li>Market Tools</li>
          <li>FII & DII</li>
          <li>Future & Options</li>
          <li>Screener</li>
          <li style="margin-left: 1rem;">‚îî Smart Filters</li>
          <li style="margin-left: 1rem;">‚îî Pre-built Filters</li>
          <li style="margin-left: 1rem;">‚îî Custom Filters</li>
          <li>Telegram Integration</li>
        </ul>
      </nav>
    </aside>

    <main>
      <h1>AI + SaaS Platform</h1>
      <div class="grid">

        <!-- Portfolio Summary -->
        <div class="card">
          <h3>Portfolio Summary</h3>
          <p><strong>Net P&L:</strong> ‚Çπ15,430</p>
          <p><strong>Today‚Äôs MTM:</strong> +‚Çπ2,150</p>
          <p><strong>Margin Used:</strong> ‚Çπ87,000</p>
          <p><strong>Open Positions:</strong> 4</p>
          <p><strong>Hedged %:</strong> 75%</p>
        </div>

        <!-- Real-time Greeks & Alerts -->
        <div class="card">
          <h3>Real-time Option Greeks & Alerts</h3>
          <div class="metrics">
            <div><strong>Delta:</strong> 0.354</div>
            <div><strong>Theta:</strong> -0.123</div>
            <div><strong>Gamma:</strong> 0.008</div>
            <div><strong>Vega:</strong> 0.218</div>
          </div>
          <p><strong>IV:</strong> 19.7% &nbsp; <strong>Alert:</strong> 212</p>
        </div>

        <!-- Strategy Assistant -->
        <div class="card">
          <h3>AI-Powered Strategy Assistant</h3>
          <p><strong>User:</strong> What is a good options strategy for low volatility?</p>
          <p><strong>DeltaGPT:</strong> In a low volatility environment, consider an <strong>Iron Condor</strong>...</p>
        </div>

        <!-- Pre-built Strategies -->
        <div class="card">
          <h3>Pre-built Strategies</h3>
          <p><strong>Bull Call Spread:</strong> +530 / 740.00</p>
          <p><strong>Iron Condor:</strong> +5780 / 570.20</p>
        </div>

        <!-- Auto Adjustment Bot -->
        <div class="card">
          <h3>Auto Adjustment Bot</h3>
          <p><strong>Status:</strong> Adjusted</p>
          <p><strong>Action:</strong> Reduced delta exposure by strike change</p>
        </div>

        <!-- Risk Coach -->
        <div class="card">
          <h3>Personalized Risk Coach</h3>
          <p>‚ö†Ô∏è You tend to <strong>overtrade</strong> in low VIX environments. Consider reducing exposure.</p>
        </div>

        <!-- Screener -->
        <div class="card">
          <h3>Screener</h3>
          <div class="tabs">
            <div class="tab active">Smart Filters</div>
            <div class="tab">Pre-built Filters</div>
            <div class="tab">Custom Filters</div>
          </div>

          <!-- Smart Filters -->
          <div class="smart-filters" style="margin-top: 1rem;">
            <p>AI-identified setups based on Greeks, IV, and volatility signals.</p>
            <ul>
              <li>üìà High Conviction Long ‚Äì IV < 18%, OI ‚Üë, PCR: 1.2</li>
              <li>‚ö†Ô∏è Short Gamma Warning ‚Äì Gamma > 0.5, Vega < 0.1</li>
            </ul>
          </div>

          <!-- Pre-built Filters -->
          <div class="prebuilt-filters" style="margin-top: 1rem; display: none;">
            <p>Explore filters like:</p>
            <ul>
              <li>üî• OI Spike > 25% ‚Äî BANKNIFTY 48700 CE</li>
              <li>üíß IV Crush ‚Äì INFY, TCS</li>
              <li>üîç Unusual Volume ‚Äì HDFCBANK > 3x avg</li>
            </ul>
          </div>

          <!-- Custom Filters -->
          <div class="custom-filters" style="margin-top: 1rem; display: none;">
            <label>
              <strong>Select Symbols:</strong><br>
              <select multiple style="width: 100%; padding: 0.5rem; border-radius: 5px;">
                <option>NIFTY</option>
                <option>BANKNIFTY</option>
                <option>RELIANCE</option>
                <option>INFY</option>
                <option>TCS</option>
                <option>ICICIBANK</option>
              </select>
            </label><br><br>

            <label>
              <strong>OI Change (%):</strong><br>
              <input type="number" placeholder="e.g. > 25" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <label>
              <strong>IV Range (%):</strong><br>
              <input type="text" placeholder="e.g. 12‚Äì25" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <label>
              <strong>PCR Range:</strong><br>
              <input type="text" placeholder="e.g. 0.8‚Äì1.2" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <label>
              <strong>Delta Threshold:</strong><br>
              <input type="text" placeholder="e.g. > 0.3" style="width: 100%; padding: 0.5rem; border-radius: 5px;">
            </label><br><br>

            <button style="background: #3b82f6; color: white; padding: 0.7rem 1.2rem; border: none; border-radius: 5px; cursor: pointer;">
              Run Screener
            </button>
          </div>
        </div>

      </div>
    </main>
  </div>

  <!-- Tab Switching Script -->
  <script>
    document.querySelectorAll('.card .tabs').forEach(tabContainer => {
      const tabs = tabContainer.querySelectorAll('.tab');
      const parentCard = tabContainer.closest('.card');

      tabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          const contentBlocks = parentCard.querySelectorAll('.custom-filters, .smart-filters, .prebuilt-filters');
          contentBlocks.forEach(block => {
            if (block) block.style.display = 'none';
          });

          const targetClass = ['smart-filters', 'prebuilt-filters', 'custom-filters'][index];
          const targetBlock = parentCard.querySelector(`.${targetClass}`);
          if (targetBlock) targetBlock.style.display = 'block';
        });
      });
    });
  </script>
<script>
  document.querySelectorAll('.card .tabs').forEach(tabContainer => {
    const tabs = tabContainer.querySelectorAll('.tab');
    const parentCard = tabContainer.closest('.card');

    tabs.forEach((tab, index) => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        const contentBlocks = parentCard.querySelectorAll('.custom-filters, .smart-filters, .prebuilt-filters');
        contentBlocks.forEach(block => {
          block.style.display = 'none';
          block.classList.remove('active');
        });

        const targetClass = ['smart-filters', 'prebuilt-filters', 'custom-filters'][index];
        const targetBlock = parentCard.querySelector(`.${targetClass}`);
        if (targetBlock) {
          targetBlock.style.display = 'block';
          setTimeout(() => targetBlock.classList.add('active'), 10); // fade in
        }
      });
    });
  });
</script>
<script>
  // Run Screener button logic
  document.querySelectorAll('.custom-filters button').forEach(button => {
    button.addEventListener('click', () => {
      const parent = button.closest('.custom-filters');

      // Capture all inputs
      const selectedSymbols = Array.from(parent.querySelector('select').selectedOptions).map(option => option.value);
      const oiChange = parent.querySelector('input[placeholder*="OI Change"]').value;
      const ivRange = parent.querySelector('input[placeholder*="IV Range"]').value;
      const pcrRange = parent.querySelector('input[placeholder*="PCR Range"]').value;
      const deltaThreshold = parent.querySelector('input[placeholder*="Delta Threshold"]').value;

      // Build JSON object
      const screenerData = {
        symbols: selectedSymbols,
        oiChange: oiChange,
        ivRange: ivRange,
        pcrRange: pcrRange,
        deltaThreshold: deltaThreshold
      };

      // For now ‚Üí log to console
      console.log('üü¢ Screener Request:', screenerData);

      // TODO: Here you can send it to your backend using fetch()
      /*
      fetch('/api/screener', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(screenerData)
      })
      .then(response => response.json())
      .then(data => {
        console.log('üü¢ Screener Response:', data);
        // Display results in a table (optional next step)
      })
      .catch(error => {
        console.error('Screener Error:', error);
      });
      */
    });
  });
</script> 
</body>
</html>
